!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react"),require("@yfmd/wavesurfer.js")):"function"==typeof define&&define.amd?define(["react","@yfmd/wavesurfer.js"],r):"object"==typeof exports?exports["plugins/minimap"]=r(require("react"),require("@yfmd/wavesurfer.js")):(e.Wavesurfer=e.Wavesurfer||{},e.Wavesurfer["plugins/minimap"]=r(e.React,e.WaveSurfer))}(this,function(e,r){return function(e){function r(i){if(t[i])return t[i].exports;var n=t[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function o(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),a=t(2);t(6);var u=function(e){function r(){return i(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return o(r,e),s(r,[{key:"componentDidMount",value:function(){var e=this;this._map=void 0,this._readyListener=this.props.wavesurfer.on("ready",function(){e._init()})}},{key:"componentWillUnmount",value:function(){this._readyListener.un()}},{key:"_init",value:function(){this._map=Object.create(WaveSurfer.Minimap),this._map.init(this.props.wavesurfer,this.props.options),this._map.render()}},{key:"render",value:function(){return!1}}]),r}(a.Component);u.propTypes={isReady:a.PropTypes.bool.isRequired,options:a.PropTypes.object.isRequired,wavesurfer:a.PropTypes.object},u.defaultProps={isReady:!1,options:{}},r.default=u},function(e,r){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(r,t){r.exports=e},function(e,t){e.exports=r},,,function(e,r,t){(function(e){var r=!1,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,o){"function"==typeof r&&r.amd?r(["wavesurfer"],function(e){return o(e)}):"object"===i(e)&&e.exports?e.exports=o(t(3)):o(n.WaveSurfer)}(void 0,function(e){"use strict";e.Minimap=e.util.extend({},e.Drawer,e.Drawer.Canvas,{init:function(r,t){this.wavesurfer=r,this.container=this.wavesurfer.drawer.container,this.lastPos=this.wavesurfer.drawer.lastPos,this.params=r.util.extend({},this.wavesurfer.drawer.params,{showRegions:!1,showOverview:!1,overviewBorderColor:"green",overviewBorderSize:2},t,{scrollParent:!1,fillParent:!0}),this.width=0,this.height=this.params.height*this.params.pixelRatio,this.createWrapper(),this.createElements(),e.Regions&&this.params.showRegions&&this.regions(),this.bindWaveSurferEvents(),this.bindMinimapEvents()},regions:function(){var e=this;this.regions={},this.wavesurfer.on("region-created",function(r){e.regions[r.id]=r,e.renderRegions()}),this.wavesurfer.on("region-updated",function(r){e.regions[r.id]=r,e.renderRegions()}),this.wavesurfer.on("region-removed",function(r){delete e.regions[r.id],e.renderRegions()})},renderRegions:function(){for(var e=this,r=this.wrapper.querySelectorAll("region"),t=0;t<r.length;++t)this.wrapper.removeChild(r[t]);Object.keys(this.regions).forEach(function(r){var t=e.regions[r],i=e.width*((t.end-t.start)/e.wavesurfer.getDuration()),n=e.width*(t.start/e.wavesurfer.getDuration()),o=e.style(document.createElement("region"),{height:"inherit",backgroundColor:t.color,width:i+"px",left:n+"px",display:"block",position:"absolute"});o.classList.add(r),e.wrapper.appendChild(o)})},createElements:function(){e.Drawer.Canvas.createElements.call(this),this.params.showOverview&&(this.overviewRegion=this.style(document.createElement("overview"),{height:this.wrapper.offsetHeight-2*this.params.overviewBorderSize+"px",width:"0px",display:"block",position:"absolute",cursor:"move",border:this.params.overviewBorderSize+"px solid "+this.params.overviewBorderColor,zIndex:2,opacity:this.params.overviewOpacity}),this.wrapper.appendChild(this.overviewRegion))},bindWaveSurferEvents:function(){var e=this;this.wavesurfer.on("ready",this.render.bind(this)),this.wavesurfer.on("audioprocess",function(r){e.progress(e.wavesurfer.backend.getPlayedPercents())}),this.wavesurfer.on("seek",function(r){e.progress(e.wavesurfer.backend.getPlayedPercents())}),this.params.showOverview&&(this.wavesurfer.on("scroll",function(r){e.draggingOverview||e.moveOverviewRegion(r.target.scrollLeft/e.ratio)}),this.wavesurfer.drawer.wrapper.addEventListener("mouseover",function(r){e.draggingOverview&&(e.draggingOverview=!1)}));var r=0,t=this.wavesurfer.util.debounce(function(){r!=e.wrapper.clientWidth&&(r=e.wrapper.clientWidth,e.render(),e.progress(e.wavesurfer.backend.getPlayedPercents()))},100);window.addEventListener("resize",t,!0),this.wavesurfer.on("destroy",function(){e.destroy.bind(this),window.removeEventListener("resize",t,!0)})},bindMinimapEvents:function(){var e=this,r=0,t=!0,i={clientX:0,clientY:0};this.on("click",function(e,r){t?(this.progress(r),this.wavesurfer.seekAndCenter(r)):t=!0}.bind(this)),this.params.showOverview&&(this.overviewRegion.addEventListener("mousedown",function(t){e.draggingOverview=!0,r=t.layerX,i.clientX=t.clientX,i.clientY=t.clientY}),this.wrapper.addEventListener("mousemove",function(t){e.draggingOverview&&e.moveOverviewRegion(t.clientX-e.container.getBoundingClientRect().left-r)}),this.wrapper.addEventListener("mouseup",function(r){i.clientX-r.clientX===0&&i.clientX-r.clientX===0?(t=!0,e.draggingOverview=!1):e.draggingOverview&&(t=!1,e.draggingOverview=!1)}))},render:function(){var e=this.getWidth(),r=this.wavesurfer.backend.getPeaks(e);this.drawPeaks(r,e),this.params.showOverview&&(this.ratio=this.wavesurfer.drawer.width/this.width,this.waveShowedWidth=this.wavesurfer.drawer.width/this.ratio,this.waveWidth=this.wavesurfer.drawer.width,this.overviewWidth=this.width/this.ratio,this.overviewPosition=0,this.overviewRegion.style.width=this.overviewWidth-2*this.params.overviewBorderSize+"px")},moveOverviewRegion:function(e){e<0?this.overviewPosition=0:e+this.overviewWidth<this.width?this.overviewPosition=e:this.overviewPosition=this.width-this.overviewWidth,this.overviewRegion.style.left=this.overviewPosition+"px",this.wavesurfer.drawer.wrapper.scrollLeft=this.overviewPosition*this.ratio}}),e.initMinimap=function(r){var t=Object.create(e.Minimap);return t.init(this,r),t}})}).call(r,t(1)(e))}])});